#=====================================================================================================================
#     ______    _ ____  ______        __  _
#    / __/ /__ (_) / / /_  __/__ ___ / /_(_)__  ___ _
#   _\ \/  '_// / / /   / / / -_|_-</ __/ / _ \/ _ `/
#  /___/_/\_\/_/_/_/   /_/  \__/___/\__/_/_//_/\_, /
#                                             /___/
#
# Test type: Unit/Functional/End-to-End/Regression
# Skill name: "High Low Game" by Amazon
# Test scope: LaunchRequest, NumberGuessIntent, AMAZON.HelpIntent, AMAZON.StopIntent,
#             AMAZON.CancelIntent, AMAZON.YesIntent, AMAZON.NoIntent
#=====================================================================================================================

---
configuration:
  locale: en-US
  dynamo: mock
  userId: 000000

---
- test: "Sequence 01. Test scenario: launch request, play one game"
- LaunchRequest:
  - response.outputSpeech.ssml: "Welcome to High Low guessing game. You have played 0 times. would you like to play?"
  - response.reprompt.outputSpeech.ssml: "Say yes to start the game or no to quit."
  - response.shouldEndSession: false
  - response.card: undefined
  - sessionAttributes.gamesPlayed: 0
  - sessionAttributes.endedSessionCount: 0
- yes:
  - response.outputSpeech.ssml: "Great! Try saying a number to start the game."
  - response.reprompt.outputSpeech.ssml: "Try saying a number."
  - response.shouldEndSession: false
- 50:
  - response.outputSpeech.ssml: "50 is correct! Would you like to play a new game?"
  - response.reprompt.outputSpeech.ssml: "Say yes to start a new game, or no to end the game."
  - response.shouldEndSession: false
  - sessionAttributes.gamesPlayed: 1
  - sessionAttributes.endedSessionCount: 0
  - sessionAttributes.guessNumber: 50
- no:
  - prompt: "Ok, see you next time!"
  - sessionAttributes.gamesPlayed: 1
  - sessionAttributes.endedSessionCount: 1
  - sessionAttributes.guessNumber: 50

---
- test: "Sequence 02. Test scenario: Invoke NumberGuessIntent, do not play."
- LaunchRequest:
- no:
  - response.outputSpeech.ssml: "Ok, see you next time!"
  - sessionAttributes.gamesPlayed: 1
  - sessionAttributes.endedSessionCount: 2 # Previous sequence counts as one ended session

---
- test: "Sequence 03. Test scenario: Invoke NumberGuessIntent, play and guess several times."
- LaunchRequest:
- yes:
  - response.reprompt.outputSpeech.ssml: "Try saying a number."
  - response.shouldEndSession: false
  - sessionAttributes.gamesPlayed: 1
  - sessionAttributes.guessNumber: "*"
  - sessionAttributes.endedSessionCount: 2
- 30:
  - response.outputSpeech.ssml == "30 is too low." goto 60
  - response.outputSpeech.ssml == "30 is correct! Would you like to play a new game?" goto "no"
  - response.reprompt.outputSpeech.ssml: "Try saying a larger number."
  - response.reprompt.outputSpeech.ssml: "Try saying a lower number."
- 60:
  - response.outputSpeech.ssml == "60 is too high." goto "50"
  - response.outputSpeech.ssml == "60 is correct! Would you like to play a new game?" goto "no"
  - response.reprompt.outputSpeech.ssml: "Try saying a larger number."
  - response.reprompt.outputSpeech.ssml: "Try saying a lower number."
- 50:
  - response.outputSpeech.ssml == "50 is correct! Would you like to play a new game?" goto "no"
  - response.reprompt.outputSpeech.ssml: "Try saying a larger number."
  - response.reprompt.outputSpeech.ssml: "Try saying a lower number."
- no:
  - response.outputSpeech.ssml: "Ok, see you next time!"
  - sessionAttributes.gamesPlayed: 2
  - sessionAttributes.guessNumber: "50"
  - sessionAttributes.endedSessionCount: 3

---
- test: "Sequence 04. Test scenario: Invoke NumberGuessIntent and ask for help and then stop."
- LaunchRequest:
- help:
  - prompt: "I am thinking of a number between zero and one hundred, try to guess and I will tell you if it is higher or lower."
  - reprompt: "Try saying a number."
  - response.shouldEndSession: false
- stop:
  - prompt: "Goodbye!"